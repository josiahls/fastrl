---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/02_fastai.exception_test.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_fastai.exception_test.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span><span class="p">,</span><span class="n">copy</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="c1"># Third party libs</span>
<span class="kn">from</span> <span class="nn">fastcore.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># Local modules</span>
<span class="kn">from</span> <span class="nn">fastrl.fastai.loop</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">_logger</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Outer</span><span class="p">(</span><span class="n">Loop</span><span class="p">):</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">before_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;before_step&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">on_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>     <span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;on_step&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">after_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;after_step&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">failed_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;failed_step&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">finally_step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;finally_step&#39;</span><span class="p">)</span>
 
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">before_jump</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;before_jump&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">on_jump</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>     <span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;on_jump&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">after_jump</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;after_jump&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">failed_jump</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;failed_jump&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">finally_jump</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;finally_jump&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Inner</span><span class="p">(</span><span class="n">Loop</span><span class="p">):</span>
    <span class="n">call_on</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">Outer</span><span class="o">.</span><span class="n">on_step</span><span class="p">,</span><span class="n">Outer</span><span class="o">.</span><span class="n">after_step</span><span class="p">,</span><span class="n">Outer</span><span class="o">.</span><span class="n">finally_jump</span><span class="p">)</span>
    
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">before_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;before_iteration&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">on_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>     <span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;on_iteration&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">after_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;after_iteration&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">failed_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;failed_iteration&#39;</span><span class="p">)</span>
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">finally_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;finally_iteration&#39;</span><span class="p">)</span>
    <span class="c1"># def run(self,loops=None,cbs=None):</span>
    <span class="c1">#     sections=self.get_sections(loops=loops,cbs=cbs)</span>
    <span class="c1">#     for section in sections:</span>
    <span class="c1">#         section.run()</span>
    
<span class="k">class</span> <span class="nc">FailingInner</span><span class="p">(</span><span class="n">Loop</span><span class="p">):</span>
    <span class="n">call_on</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">Inner</span><span class="o">.</span><span class="n">finally_iteration</span><span class="p">)</span>
    
    <span class="nd">@event</span>
    <span class="k">def</span> <span class="nf">on_force_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                    
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;on_force_fail&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span>
        
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">OuterCallback</span><span class="p">(</span><span class="n">Callback</span><span class="p">):</span>
    <span class="n">call_on</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">Outer</span><span class="o">.</span><span class="n">on_step</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">before_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">dict</span><span class="p">(</span><span class="n">this</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span><span class="n">that</span><span class="o">=</span><span class="nb">str</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   OuterCallback called lol&#39;</span><span class="p">)</span>

<span class="n">Outer</span><span class="p">()</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">L</span><span class="p">(</span><span class="n">Inner</span><span class="p">(),</span><span class="n">FailingInner</span><span class="p">()),</span><span class="n">OuterCallback</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[Section, Section]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">Outer</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">L</span><span class="p">(</span><span class="n">Inner</span><span class="p">(),</span><span class="n">FailingInner</span><span class="p">()),</span><span class="n">OuterCallback</span><span class="p">())</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">exception_info</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>before_step
on_step
before_iteration
on_iteration
after_iteration
finally_iteration
on_force_fail
adding render traceback
failed_step
finally_step
(&lt;class &#39;Exception&#39;&gt;, Exception(), &lt;traceback object at 0x7fa02df46b40&gt;)
(&lt;class &#39;Exception&#39;&gt;, Exception(), &lt;traceback object at 0x7fa02df46b80&gt;)
hi lol
{&#39;self&#39;: &lt;ipykernel.zmqshell.ZMQInteractiveShell object at 0x7fa0677b63a0&gt;, &#39;code_obj&#39;: &lt;code object &lt;module&gt; at 0x7fa0644ad030, file &#34;/tmp/ipykernel_707/1928053429.py&#34;, line 1&gt;, &#39;result&#39;: &lt;ExecutionResult object at 7fa02df8f6d0, execution_count=6 error_before_exec=None error_in_exec= info=&lt;ExecutionInfo object at 7fa02df8f520, raw_cell=&#34;try:
    Outer().run(L(Inner(),FailingInner()),Out..&#34; store_history=True silent=False shell_futures=True&gt; result=None&gt;, &#39;async_&#39;: False, &#39;__tracebackhide__&#39;: &#39;__ipython_bottom__&#39;, &#39;old_excepthook&#39;: &lt;bound method IPKernelApp.excepthook of &lt;ipykernel.kernelapp.IPKernelApp object at 0x7fa06cf32340&gt;&gt;, &#39;outflag&#39;: True}
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">Exception</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">/tmp/ipykernel_707/1928053429.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg">     </span>Outer<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span>L<span class="ansi-blue-fg">(</span>Inner<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span>FailingInner<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span>OuterCallback<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-green-fg">finally</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>     exception_info<span class="ansi-blue-fg">=</span>sys<span class="ansi-blue-fg">.</span>exc_info<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     print<span class="ansi-blue-fg">(</span>sys<span class="ansi-blue-fg">.</span>exc_info<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/fastrl/fastrl/fastai/loop.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self, loops, cbs)</span>
<span class="ansi-green-intense-fg ansi-bold">    254</span>         sections<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>get_sections<span class="ansi-blue-fg">(</span>loops<span class="ansi-blue-fg">=</span>loops<span class="ansi-blue-fg">,</span>cbs<span class="ansi-blue-fg">=</span>cbs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    255</span>         <span class="ansi-green-fg">for</span> section <span class="ansi-green-fg">in</span> sections<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 256</span><span class="ansi-red-fg">             </span>section<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    257</span> 
<span class="ansi-green-intense-fg ansi-bold">    258</span>     <span class="ansi-blue-fg">@</span>property

<span class="ansi-green-fg">~/fastrl/fastrl/fastai/loop.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    181</span>             <span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;before_inner&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">:</span> o<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span>             self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;on_&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 183</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;on_inner&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">:</span> o<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    184</span>             self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;after_&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    185</span>             <span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;after_inner&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">:</span> o<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/fastrl/fastrl/fastai/loop.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self, loops, cbs)</span>
<span class="ansi-green-intense-fg ansi-bold">    254</span>         sections<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>get_sections<span class="ansi-blue-fg">(</span>loops<span class="ansi-blue-fg">=</span>loops<span class="ansi-blue-fg">,</span>cbs<span class="ansi-blue-fg">=</span>cbs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    255</span>         <span class="ansi-green-fg">for</span> section <span class="ansi-green-fg">in</span> sections<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 256</span><span class="ansi-red-fg">             </span>section<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    257</span> 
<span class="ansi-green-intense-fg ansi-bold">    258</span>     <span class="ansi-blue-fg">@</span>property

<span class="ansi-green-fg">~/fastrl/fastrl/fastai/loop.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    192</span>         <span class="ansi-green-fg">finally</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    193</span>             self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;finally_&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 194</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;finally_inner&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">:</span> o<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    195</span> 
<span class="ansi-green-intense-fg ansi-bold">    196</span>     <span class="ansi-blue-fg">@</span>classmethod

<span class="ansi-green-fg">~/fastrl/fastrl/fastai/loop.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self, loops, cbs)</span>
<span class="ansi-green-intense-fg ansi-bold">    254</span>         sections<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>get_sections<span class="ansi-blue-fg">(</span>loops<span class="ansi-blue-fg">=</span>loops<span class="ansi-blue-fg">,</span>cbs<span class="ansi-blue-fg">=</span>cbs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    255</span>         <span class="ansi-green-fg">for</span> section <span class="ansi-green-fg">in</span> sections<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 256</span><span class="ansi-red-fg">             </span>section<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    257</span> 
<span class="ansi-green-intense-fg ansi-bold">    258</span>     <span class="ansi-blue-fg">@</span>property

<span class="ansi-green-fg">~/fastrl/fastrl/fastai/loop.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    186</span>         <span class="ansi-green-fg">except</span> Exception <span class="ansi-green-fg">as</span> ex<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    187</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 188</span><span class="ansi-red-fg">                 </span>self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;failed_&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    189</span>                 <span class="ansi-green-fg">raise</span>
<span class="ansi-green-intense-fg ansi-bold">    190</span>             <span class="ansi-green-fg">finally</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/fastrl/fastrl/fastai/loop.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    180</span>             self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;before_&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    181</span>             <span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;before_inner&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">:</span> o<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 182</span><span class="ansi-red-fg">             </span>self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;on_&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    183</span>             <span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;on_inner&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">:</span> o<span class="ansi-blue-fg">.</span>run<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    184</span>             self<span class="ansi-blue-fg">.</span>events<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;after_&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/fastrl/fastrl/fastai/loop.py</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(self, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">     72</span>     <span class="ansi-green-fg">def</span> __call__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     73</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 74</span><span class="ansi-red-fg">             </span>ret<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>function<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>loop<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     75</span>             <span class="ansi-green-fg">for</span> cb <span class="ansi-green-fg">in</span> self<span class="ansi-blue-fg">.</span>cbs<span class="ansi-blue-fg">:</span> cb_ret<span class="ansi-blue-fg">=</span>getattr<span class="ansi-blue-fg">(</span>cb<span class="ansi-blue-fg">,</span>self<span class="ansi-blue-fg">.</span>name<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     76</span>         <span class="ansi-green-fg">except</span> Exception<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/tmp/ipykernel_707/3821596272.py</span> in <span class="ansi-cyan-fg">on_force_fail</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">     46</span>     <span class="ansi-green-fg">def</span> on_force_fail<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     47</span>         print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;on_force_fail&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 48</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">raise</span> Exception
<span class="ansi-green-intense-fg ansi-bold">     49</span> 

<span class="ansi-red-fg">Exception</span>: </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Outer().get_sections(L(Inner(),FailingInner()),OuterCallback)[0].events[&#39;on_inner&#39;][0].sections[0].run()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>


